
Format.xml
<?xml version="1.0" encoding="UTF-8"?>
<pattern>
	<!-- PE93 DATOS CLIENTE -->
	<fmtdef id="PE93_client_data_request">
		<bsvreq>
			<header>
				<usuario>${header.userName}</usuario>
				<password>${header.userPassword}</password>
				<canal>${header.channel}</canal>
				<trxid>${header.trxId}</trxid>
				<requerimiento>datos_cliente</requerimiento>
			</header>
			<data>
				<tipodoc>${data.docType}</tipodoc>
				<nrodoc>${data.docNumber}</nrodoc>
				<numcli>${data.numCli}</numcli>
			</data>
		</bsvreq>
	</fmtdef>

	<fmtdef id="PE93_client_data_response">
		<bsvrsp>
			<header map="responseHeader" class="com.midd.bean.ResponseHeader">
				<resultado>${responseHeader.result}</resultado>
				<aviso>
					<codigo>${responseHeader.warningCode}</codigo>
					<mensaje>${responseHeader.warningMessage}</mensaje>
				</aviso>
				<error>
					<codigo>${responseHeader.errorCode}</codigo>
					<mensaje>${responseHeader.errorMessage}</mensaje>
				</error>
				<fecha>${responseHeader.date}</fecha>
				<hora>${responseHeader.time}</hora>
				<nombre>${responseHeader.instanceName}</nombre>
			</header>
			<data map="${responseData}" class="com.midd.bean.response.ClientData">
				<tipodoc>${responseData.docType}</tipodoc>
				<nrodoc>${responseData.docNumber}</nrodoc>
				<numcli>${responseData.cliNumber}</numcli>
				<tarjeta>${responseData.cardNumber}</tarjeta>
				<pin>${responseData.pin}</pin>
				<numclie>${responseData.clientNumber}</numclie>
				<nombre>${responseData.name}</nombre>
				<priape>${responseData.lastName}</priape>
				<cuit>${responseData.cuit}</cuit>
				<oficial>${responseData.oficial}</oficial>
				<direc>${responseData.address}</direc>
				<indfisju>${responseData.indfisju}</indfisju>
				<nro>${responseData.number}</nro>
				<piso>${responseData.floor}</piso>
				<depto>${responseData.apartament}</depto>
				<localid>${responseData.lacality}</localid>
				<codpost>${responseData.postalCode}</codpost>
				<codprov>${responseData.stateCode}</codprov>
				<teltip>${responseData.phoneType}</teltip>
				<telpref>${responseData.phonePrefix}</telpref>
				<telcar>${responseData.phoneAreaCode}</telcar>
				<telnum>${responseData.phoneNumber}</telnum>
				<faxnum>${responseData.faxNumber}</faxnum>
				<email>${responseData.email}</email>
				<fenacim>${responseData.birthDate}</fenacim>
				<pecnaci>${responseData.countryCode}</pecnaci>
				<orgbkb>${responseData.organizationCode}</orgbkb>
				<segment>${responseData.segmentCode}</segment>
				<ofiape>${responseData.ofiape}</ofiape>
				<empreco>${responseData.customerCode}</empreco>
				<tipoact>${responseData.activityCode}</tipoact>
				<profesi>${responseData.profession}</profesi>
				<tipoiva>${responseData.ivaType}</tipoiva>
				<estado>${responseData.state}</estado>
				<condic>${responseData.condition}</condic>
				<fealtcl>${responseData.addDate}</fealtcl>
				<fulmodo>${responseData.lastModificationDate}</fulmodo>
				<fulacpi>${responseData.lastACPIDdate}</fulacpi>
				<fulmopi>${responseData.lastModificationPI}</fulmopi>
				<estadpi>${responseData.statePI}</estadpi>
				<cantacc>${responseData.accountCount}</cantacc>
				<modo>${responseData.mode}</modo>
				<verdocu>${responseData.documentVersion}</verdocu>
				<sexo>${responseData.gender}</sexo>
				<calibcra>${responseData.bcraCalification}</calibcra>
				<tipodocpri>${responseData.principalDocType}</tipodocpri>
				<nrodocpri>${responseData.principalDocNumber}</nrodocpri>
				<cantprod>${responseData.productCount}</cantprod>
				<general>
					<rowset list="${responseData.products}">
						<row map="${responseData.products[?]}" class="com.midd.bean.Product">
							<descrip>${responseData.products[?].description}</descrip>
							<nroprod>${responseData.products[?].number}</nroprod>
							<nronoalt>${responseData.products[?].numberNoAlt}</nronoalt>
							<subprod>${responseData.products[?].subproductCode}</subprod>
							<saldo_dispue>${responseData.products[?].dispBalance}</saldo_dispue>
							<limite>${responseData.products[?].limit}</limite>
							<saldo_dispon>${responseData.products[?].availableBalance}</saldo_dispon>
							<org_prod>${responseData.products[?].organizationCode}</org_prod>
							<seg_prod>${responseData.products[?].segmentCode}</seg_prod>
							<divisa>${responseData.products[?].currencyCode}</divisa>
							<estprod>${responseData.products[?].productStatus}</estprod>
						</row>
					</rowset>
				</general>
			</data>
		</bsvrsp>
	</fmtdef>
	<!-- BET3 CUENTAS DEL CLIENTE -->
		
	<fmtdef id="BET3_client_account_request">
		<bsvreq>
			<header>
				<usuario>${header.userName}</usuario>
				<password>${header.userPassword}</password>
				<canal>${header.channel}</canal>
				<trxid>${header.trxId}</trxid>
				<requerimiento>amc_cuentas_vistas</requerimiento>
			</header>
			<data>
				<nropro>${data.prodNumber}</nropro>
				<ctabkb>${data.bkbAccount}</ctabkb>
				<opcion>${data.opcion}</opcion>
				<ctadol>${data.dolarAccount}</ctadol>
				<ctatit>${data.titleAccount}</ctatit>
			</data>
		</bsvreq>
	</fmtdef>
	
	<fmtdef id="BET3_client_account_response">
		<bsvrsp>
			<header map="responseHeader" class="com.midd.bean.ResponseHeader">
				<resultado>${responseHeader.result}</resultado>
				<aviso>
					<codigo>${responseHeader.warningCode}</codigo>
					<mensaje>${responseHeader.warningMessage}</mensaje>
				</aviso>
				<error>
					<codigo>${responseHeader.errorCode}</codigo>
					<mensaje>${responseHeader.errorMessage}</mensaje>
				</error>
				<fecha>${responseHeader.date}</fecha>
				<hora>${responseHeader.time}</hora>
				<nombre>${responseHeader.instanceName}</nombre>
			</header>
			<data map="${responseData}" class="com.midd.bean.response.ClientAccount">
				<nropro>${responseData.prodNumber}</nropro>
				<ctabkb>${responseData.bkbAccount}</ctabkb>
				<opcion>${responseData.opcion}</opcion>
				<ctadol>${responseData.dolarAccount}</ctadol>
				<ctatit>${responseData.titleAccount}</ctatit>
			</data>
		</bsvrsp>
	</fmtdef>
	
	<!-- IA54 MAILS DE LOS PARTICIPES -->
	
	<fmtdef id="IA54_client_email_request">
		<bsvreq>
			<header>
				<usuario>${header.userName}</usuario>
				<password>${header.userPassword}</password>
				<canal>${header.channel}</canal>
				<trxid>${header.trxId}</trxid>
				<requerimiento>adhesion_eresumen</requerimiento>
			</header>
			<data>
				<cliente>${data.client}</cliente>
				<nummail>${data.mailNumber}</nummail>
				<ctaalt>${data.altAccount}</ctaalt>
				<ctabkb>${data.bkbAccount}</ctabkb>
				<opcion>${data.option}</opcion>
			</data>
		</bsvreq>
	</fmtdef>
	
	<fmtdef id="IA54_client_email_response">
		<bsvrsp>
			<header map="responseHeader" class="com.midd.bean.ResponseHeader">
				<resultado>${responseHeader.result}</resultado>
				<aviso>
					<codigo>${responseHeader.warningCode}</codigo>
					<mensaje>${responseHeader.warningMessage}</mensaje>
				</aviso>
				<error>
					<codigo>${responseHeader.errorCode}</codigo>
					<mensaje>${responseHeader.errorMessage}</mensaje>
				</error>
				<fecha>${responseHeader.date}</fecha>
				<hora>${responseHeader.time}</hora>
				<nombre>${responseHeader.instanceName}</nombre>
			</header>
			<data map="${responseData}" class="com.midd.bean.response.ClientEmail">
				<opcion>${responseData.option}</opcion>
				<origen>${responseData.origin}</origen>
				<cliente>${responseData.cliente}</cliente>
				<tipodoc>${responseData.docType}</tipodoc>
				<nrodoc>${responseData.docNumber}</nrodoc>
				<apeynom>${responseData.apeYname}</apeynom>
				<ctaalt>${responseData.altAccount}</ctaalt>
				<ctabkb>${responseData.bkbAccount}</ctabkb>
				<nummail>${responseData.mailNumber}</nummail>
				<general>
					<rowset list="${responseData.products}">
						<row map="${responseData.products[?]}" class="com.midd.bean.ProductClientEmail"> 
							<nronoalt>${responseData.products[?].altNoNumber}</nronoalt>
							<codprod>${responseData.products[?].prodCode}</codprod>
							<descprod>${responseData.products[?].prodDescription}</descprod>
							<estado>${responseData.products[?].state}</estado>
							<descestado>${responseData.products[?].desState}</descestado>
							<nroemail>${responseData.products[?].emailNumber}</nroemail>
							<email>${responseData.products[?].email}</email>
							<fealta>${responseData.products[?].fealta}</fealta>
							<febaja>${responseData.products[?].febaja}</febaja>
							<fechavig>${responseData.products[?].fechavig}</fechavig>
						</row>
					</rowset>
				</general>
			</data>
		</bsvrsp>
	</fmtdef>
	
	<!-- BEPI CONSULTA DE INSVERSOR -->
	
	<fmtdef id="BEPI_investor_request">
		<bsvreq>
			<header>
				<usuario>${header.userName}</usuario>
				<password>${header.userPassword}</password>
				<canal>${header.channel}</canal>
				<trxid>${header.trxId}</trxid>
				<requerimiento>consulta_alta_test_inversor</requerimiento>
			</header>
			<data>
				<modo>${data.mode}</modo>
				<codiser>${data.iserCode}</codiser>
				<cuenta>${data.account}</cuenta>
				<numprod>${data.prodNumber}</numprod>	
			</data>
		</bsvreq>
	</fmtdef>
	
	<fmtdef id="BEPI_investor_response">
		<bsvrsp>
			<header map="responseHeader" class="com.midd.bean.ResponseHeader">
				<resultado>${responseHeader.result}</resultado>
				<aviso>
					<codigo>${responseHeader.warningCode}</codigo>
					<mensaje>${responseHeader.warningMessage}</mensaje>
				</aviso>
				<error>
					<codigo>${responseHeader.errorCode}</codigo>
					<mensaje>${responseHeader.errorMessage}</mensaje>
				</error>
				<fecha>${responseHeader.date}</fecha>
				<hora>${responseHeader.time}</hora>
				<nombre>${responseHeader.instanceName}</nombre>
			</header>
			<data map="${responseData}" class="com.midd.bean.response.ClientInvestor">
				<modo>${responseData.mode}</modo>
				<numclie>${responseData.clientNumber}</numclie>
				<numprod>${responseData.prodNumber}</numprod>
				<codiser>${responseData.iserCode}</codiser>
				<cuenta>${responseData.account}</cuenta>
				<rubro>${responseData.rubroM}</rubro>
				<tipoper>${responseData.operType}</tipoper>
				<nuevo>${responseData.nuevo}</nuevo>
				<campo1>${responseData.campo1}</campo1>
				<campo2>${responseData.campo2}</campo2>
				<campo3>${responseData.campo3}</campo3>
				<campo4>${responseData.campo4}</campo4>
				<campo5>${responseData.campo5}</campo5>
				<campo6>${responseData.campo6}</campo6>
				<campo7>${responseData.campo7}</campo7>
				<campo8>${responseData.campo8}</campo8>
				<campo9>${responseData.campo9}</campo9>
				<campo10>${responseData.campo10}</campo10>
				<perfil>${responseData.perfil}</perfil>
				<descperfil>${responseData.perfilDescription}</descperfil>		
			</data>
		</bsvrsp>
	</fmtdef>
	
	<!-- BE61 CONSULTA DETALLE PARTICIPES -->
	
	<fmtdef id="BE61_participant_request">
		<bsvreq>
			<header>
				<usuario>${header.userName}</usuario>
				<password>${header.userPassword}</password>
				<canal>${header.channel}</canal>
				<trxid>${header.trxId}</trxid>
				<requerimiento>cons_titulos_cta_custodia</requerimiento>
			</header>
			<data>
			
				<opcion>${data.option}</opcion>
				<ctacust>${data.custAccount}</ctacust>
				<salida>${data.salida}</salida>
				<sucursal>${data.sucursal}</sucursal>
			</data>
		</bsvreq>
	</fmtdef>
	
	<fmtdef id="BE61_participant_response">
		<bsvrsp>
			<header map="responseHeader" class="com.midd.bean.ResponseHeader">
				<resultado>${responseHeader.result}</resultado>
				<aviso>
					<codigo>${responseHeader.warningCode}</codigo>
					<mensaje>${responseHeader.warningMessage}</mensaje>
				</aviso>
				<error>
					<codigo>${responseHeader.errorCode}</codigo>
					<mensaje>${responseHeader.errorMessage}</mensaje>
				</error>
				<fecha>${responseHeader.date}</fecha>
				<hora>${responseHeader.time}</hora>
				<nombre>${responseHeader.instanceName}</nombre>
			</header>
			<data map="${responseData}" class="com.midd.bean.response.ClientParticipant">
				<opcion>${responseData.option}</opcion>
				<ctacust>${responseData.custAccount}</ctacust>
				<salida>${responseData.salida}</salida>
				<general>
					<rowset list="${responseData.products}">
						<row map="${responseData.products[?]}" class="com.midd.bean.ProductParticipant">
							<titulo>${responseData.products[?].title}</titulo>
							<codtitu>${responseData.products[?].titleCode}</codtitu>
							<serie>${responseData.products[?].serie}</serie>
							<lamina>${responseData.products[?].lamina}</lamina>
							<nrocupo>${responseData.products[?].cupoNumber}</nrocupo>
							<moneda>${responseData.products[?].moneda}</moneda>
							<valnom>${responseData.products[?].valnom}</valnom>
							<salprov>${responseData.products[?].salprov}</salprov>
							<rentpes>${responseData.products[?].rentpes}</rentpes>
							<amorpes>${responseData.products[?].amorpes}</amorpes>
							<comipes>${responseData.products[?].comipes}</comipes>
							<rentdol>${responseData.products[?].rentdol}</rentdol>
							<amordol>${responseData.products[?].amordol}</amordol>
							<comidol>${responseData.products[?].comidol}</comidol>
							<saldoval>${responseData.products[?].saldoval}</saldoval>
							<codcaja>${responseData.products[?].codCaja}</codcaja>
							<desccaja>${responseData.products[?].descCaja}</desccaja>
							<tipsaldo>${responseData.products[?].tipSaldo}</tipsaldo>
							<descsaldo>${responseData.products[?].descSaldo}</descsaldo>
							<codigo_mae>${responseData.products[?].code_mae}</codigo_mae>
							<marca_acc>${responseData.products[?].marca_acc}</marca_acc>
							<lamina_min>${responseData.products[?].lamina_min}</lamina_min>
							<precio_compra>${responseData.products[?].precio_compra}</precio_compra>
							<tipo_precio_compra>${responseData.products[?].tipo_precio_compra}</tipo_precio_compra>
							<fecha_hora_compra>${responseData.products[?].fecha_hora_compra}</fecha_hora_compra>
							<precio_vta>${responseData.products[?].precio_vta}</precio_vta>
							<tipo_precio_vta>${responseData.products[?].tipo_precio_vta}</tipo_precio_vta>
							<fecha_hora_venta>${responseData.products[?].fecha_hora_venta}</fecha_hora_venta>
							<desc_larga>${responseData.products[?].desc_larga}</desc_larga>
							<plazo_default>${responseData.products[?].plazo_default}</plazo_default>
							<rubro>${responseData.products[?].rubro}</rubro>
							<tipodoc>${responseData.products[?].docType}</tipodoc>
							<nrodoc>${responseData.products[?].docNumber}</nrodoc>		
						</row>
					</rowset>
				</general>
				<sucursal>${responseData.sucursal}</sucursal>
				<cod_estado>${responseData.cod_estado}</cod_estado>
				<desc_estado>${responseData.desc_estado}</desc_estado>
				<cta_vista_pesos>${responseData.cta_vista_pesos}</cta_vista_pesos>
				<cta_vista_dolares>${responseData.cta_vista_dolares}</cta_vista_dolares>
			</data>
		</bsvrsp>
	</fmtdef>
	
</pattern>

		*****************************************	
utils.ts

export class FormatXml {

    public id: string;
    public headerReq: string;
    public headerResp: string;
    public data: string;

    constructor(public requerimiento: string){
        this.headerReq = "<header>\n\t\t\t<usuario>${header.userName}</usuario>\n\t\t\t<password>${header.userPassword}</password>\n\t\t\t<canal>${header.channel}</canal>\n\t\t\t<trxid>${header.trxId}</trxid>\n\t\t\t<requerimiento>" + requerimiento + "</requerimiento>\n</header>\n";
        this.headerResp = "<header map=\"responseHeader\" class=\"com.midd.bean.ResponseHeader\">\n\t<resultado>${responseHeader.result}</resultado>\n\t<aviso>\n\t\t<codigo>${responseHeader.warningCode}</codigo>\n\t\t<mensaje>${responseHeader.warningMessage}</mensaje>\n\t</aviso>\n\t<error>\n\t\t<codigo>${responseHeader.errorCode}</codigo>\n\t\t<mensaje>${responseHeader.errorMessage}</mensaje>\n\t</error>\n\t<fecha>${responseHeader.date}</fecha>\n\t<hora>${responseHeader.time}</hora>\n\t<nombre>${responseHeader.instanceName}</nombre>\n\t\t</header>\n";
        this.data = "\t\t\t<data> ";
    }

    requestGenerator(): string{
        let format: string = "<fmtdef id=" + this.id +">\n";
        let bsv:string = "\t<bsvreq>\n\t\t" + this.headerReq;
        let nuevoDato: boolean = false;
        let campo:string;


        while (nuevoDato) {
            campo = this.dataGenerator("","");
            this.data += campo;
        }

        bsv = bsv + this.data + "</data>\n\t</bsvreq>\n";
        format = format + bsv + "</fmtdef>";
        return format;
    }

    responseGenerator(): string{
        return "";
    }


    dataGenerator(tag: string, nuevoCampo: string): string{
        return "";
    }
}

		*****************************************	
script.ts
import { FormatXml } from "./utils"

function main(): void  {

}

main();


let f: FormatXml = new FormatXml("datos_cliente");



console.log(f.requestGenerator());
//console.log(f.headerResp);
